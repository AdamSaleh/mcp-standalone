FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"bmFtZTogYW5kcm9pZC1hcHAKaW1hZ2U6IGZlZWRoZW5yeS9hbmRyb2lkLWFwcC1hcGIKZGVzY3Jp\
cHRpb246IFRoaXMgaXMgYSBzYW1wbGUgYXBwbGljYXRpb24gZ2VuZXJhdGVkIGJ5IGFwYiBpbml0\
CmJpbmRhYmxlOiBGYWxzZQphc3luYzogb3B0aW9uYWwKdGFnczogCiAgLSBtb2JpbGUKbWV0YWRh\
dGE6CiAgZGlzcGxheU5hbWU6IEFuZHJvaWQgQXBwCnBsYW5zOgogIC0gbmFtZTogZGVmYXVsdAog\
ICAgZGVzY3JpcHRpb246IFNldHMgdXAgYW4gYW5kcm9pZCBhcHAgdmlhIHRoZSBtb2JpbGUgY29u\
dHJvbCBwYW5lbC4gVGhlIG1vYmlsZSBjb250cm9sIHBhbmVsIHdpbGwgYmUgZGVwbG95ZWQgaWYg\
bm90IHByZXNlbnQuCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToge30KICAgIHBhcmFtZXRl\
cnM6IAogICAgLSBuYW1lOiBhcHBOYW1lCiAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgIGRlZmF1\
bHQ6IG15YXBwCiAgICAgIHR5cGU6IHN0cmluZwogICAgICB0aXRsZTogeW91ciBuZXcgYXBwcyBu\
YW1lCg=="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
