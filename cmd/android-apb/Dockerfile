FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"bmFtZTogYW5kcm9pZC1hcHAKaW1hZ2U6IGZlZWRoZW5yeS9hbmRyb2lkLWFwcC1hcGIKZGVzY3Jp\
cHRpb246IFRoaXMgaXMgYSBzYW1wbGUgYXBwbGljYXRpb24gZ2VuZXJhdGVkIGJ5IGFwYiBpbml0\
CmJpbmRhYmxlOiBGYWxzZQphc3luYzogb3B0aW9uYWwKdGFnczogCiAgLSBtb2JpbGUKbWV0YWRh\
dGE6CiAgZGlzcGxheU5hbWU6IEFuZHJvaWQgQXBwCiAgY29uc29sZS5vcGVuc2hpZnQuaW8vaWNv\
bkNsYXNzOiBmYSBmYS1hbmRyb2lkCnBsYW5zOgogIC0gbmFtZTogZGVmYXVsdAogICAgZGVzY3Jp\
cHRpb246IFNldHMgdXAgYW4gYW5kcm9pZCBhcHAgdmlhIHRoZSBtb2JpbGUgY29udHJvbCBwYW5l\
bC4gVGhlIG1vYmlsZSBjb250cm9sIHBhbmVsIHdpbGwgYmUgZGVwbG95ZWQgaWYgbm90IHByZXNl\
bnQuCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToge30KICAgIHBhcmFtZXRlcnM6IAogICAg\
LSBuYW1lOiBhcHBOYW1lCiAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgIGRlZmF1bHQ6IG15YXBw\
CiAgICAgIHR5cGU6IHN0cmluZwogICAgICB0aXRsZTogeW91ciBuZXcgYXBwcyBuYW1lCg=="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
